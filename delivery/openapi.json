{"openapi":"3.0.1","info":{"title":"ReviewTrust API","description":"API specification for ReviewTrust backend","version":"1.0.0"},"servers":[{"url":"http://localhost:58200","description":"Generated server url"}],"paths":{"/api/admin/scrape-jobs/url":{"post":{"tags":["scrape-job-controller"],"operationId":"rescrapeByUrl","parameters":[{"name":"url","in":"query","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":50}},{"name":"locale","in":"query","required":false,"schema":{"type":"string"}},{"name":"productId","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/scrape-jobs/asin/{asin}":{"post":{"tags":["scrape-job-controller"],"operationId":"rescrapeByAsin","parameters":[{"name":"asin","in":"path","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":50}},{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/reviews/{id}/reject":{"post":{"tags":["admin-reviews-controller"],"operationId":"reject","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RejectRequest"}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/reviews/{id}/approve":{"post":{"tags":["admin-reviews-controller"],"operationId":"approve","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/products":{"post":{"tags":["admin-products-controller"],"operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/products/{id}/toggle-visibility":{"post":{"tags":["product-admin-controller"],"operationId":"toggle","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleVisibilityRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ToggleVisibilityResult"}}}}}}},"/api/admin/products/{id}/rescrape":{"post":{"tags":["admin-products-controller"],"operationId":"rescrape","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"url","in":"query","required":false,"schema":{"type":"string"}},{"name":"asin","in":"query","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":50}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/public/v1/scrape/preview/url":{"get":{"tags":["scrape-preview-controller"],"operationId":"previewByUrl","parameters":[{"name":"url","in":"query","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PreviewResponse"}}}}}}},"/api/public/v1/scrape/preview/asin":{"get":{"tags":["scrape-preview-controller"],"operationId":"previewByAsin","parameters":[{"name":"asin","in":"query","required":true,"schema":{"type":"string"}},{"name":"locale","in":"query","required":false,"schema":{"type":"string","default":"ja-JP"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PreviewResponse"}}}}}}},"/api/products":{"get":{"tags":["products-query-controller"],"operationId":"list","parameters":[{"name":"q","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductSummary"}}}}}}}},"/api/products/{id}":{"get":{"tags":["products-query-controller"],"operationId":"detail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductDetail"}}}}}}},"/api/products/{id}/scores":{"get":{"tags":["scores-controller"],"operationId":"getScores","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/whoami":{"get":{"tags":["auth-controller"],"operationId":"whoami","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/admin/scoring/rules-catalog":{"get":{"tags":["scoring-profile-controller"],"operationId":"rulesCatalog","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonNode"}}}}}}},"/api/admin/scoring/profile":{"get":{"tags":["scoring-profile-controller"],"operationId":"profile","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/logs/exception":{"get":{"tags":["log-controller"],"operationId":"exception","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":100}},{"name":"include_stack","in":"query","required":false,"schema":{"type":"boolean","default":false}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ExceptionLogDto"}}}}}}}},"/api/admin/logs/audit":{"get":{"tags":["log-controller"],"operationId":"audit","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":100}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogDto"}}}}}}}}},"components":{"schemas":{"RejectRequest":{"required":["reason"],"type":"object","properties":{"reason":{"type":"string"}}},"CreateProductRequest":{"required":["name","url"],"type":"object","properties":{"name":{"type":"string"},"url":{"pattern":"^https://www\\.amazon\\.co\\.jp/(?:dp|gp/product)/[A-Z0-9]{10}(?:/)?(?:\\?.*)?$","type":"string"}}},"ToggleVisibilityRequest":{"type":"object","properties":{"visible":{"type":"boolean","writeOnly":true}}},"ToggleVisibilityResult":{"type":"object","properties":{"productId":{"type":"string","format":"uuid"},"visible":{"type":"boolean"}}},"LoginRequest":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}},"PreviewResponse":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/ReviewItem"}},"count":{"type":"integer","format":"int32"}}},"ReviewItem":{"type":"object","properties":{"asin":{"type":"string"},"reviewId":{"type":"string"},"title":{"type":"string"},"body":{"type":"string"},"rating":{"type":"integer","format":"int32"},"reviewDate":{"type":"string","format":"date"},"reviewer":{"type":"string"},"reviewUrl":{"type":"string"},"helpfulVotes":{"type":"integer","format":"int32"}}},"ProductSummary":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"url":{"type":"string"},"score":{"type":"integer","format":"int32"},"rank":{"type":"string"},"flags":{"type":"array","items":{"type":"string"}},"updatedAt":{"type":"string","format":"date-time"}}},"ProductDetail":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"url":{"type":"string"},"score":{"type":"integer","format":"int32"},"rank":{"type":"string"},"sakuraJudge":{"type":"string"},"flags":{"type":"array","items":{"type":"string"}},"metrics":{"type":"object","additionalProperties":{"type":"object"}},"updatedAt":{"type":"string","format":"date-time"}}},"JsonNode":{"type":"object"},"ExceptionLogDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"jobId":{"type":"string","format":"uuid"},"scope":{"type":"string"},"errorCode":{"type":"string"},"message":{"type":"string"},"stack":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}},"AuditLogDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"actorId":{"type":"string","format":"uuid"},"action":{"type":"string"},"targetType":{"type":"string"},"targetId":{"type":"string","format":"uuid"},"meta":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}}}}